# –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ MCP Kandinsky –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## üéØ –¶–µ–ª—å
–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –ê–≥–µ–Ω—Ç–∞ ‚Ññ3 (GenerateImageAgent) —Å MCP Kandinsky –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≥–æ—Ä–æ–¥–æ–≤ —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π API Kandinsky.

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. MCP –ü—Ä–æ—Ç–æ–∫–æ–ª
- **–§–∞–π–ª**: `app/src/main/java/com/example/ai_advent_25/data/network/MCPProtocol.kt`
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**: 
  - –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è MCP –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ —Å JSON-RPC
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ stdio transport
  - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, –≤—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤

### 2. MCP –ö–ª–∏–µ–Ω—Ç
- **–§–∞–π–ª**: `app/src/main/java/com/example/ai_advent_25/data/network/MCPClient.kt`
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**: 
  - –í—ã–∑–æ–≤ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ `kandinsky_generate_image`
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (prompt, filename, project_dir, width, height, style, negative_prompt, overwrite)
  - Fallback –º–µ—Ö–∞–Ω–∏–∑–º –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ MCP
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MCPProtocol
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤

### 2. KandinskyService
- **–§–∞–π–ª**: `app/src/main/java/com/example/ai_advent_25/data/network/KandinskyService.kt`
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MCP –∫–ª–∏–µ–Ω—Ç–æ–º
  - –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  - Fallback –Ω–∞ –∑–∞–≥–ª—É—à–∫—É –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ MCP
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤

### 3. UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **–§–∞–π–ª**: `app/src/main/java/com/example/ai_advent_25/ui/ChatScreen.kt`
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
  - –ö–Ω–æ–ø–∫–∞ "–í–∞—à –≥–æ—Ä–æ–¥ –≥–ª–∞–∑–∞–º–∏ –ò–ò"
  - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  - –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤

### 4. –ê–≥–µ–Ω—Ç ‚Ññ3
- **–§–∞–π–ª**: `app/src/main/java/com/example/ai_advent_25/data/agents/GenerateImageAgentRepository.kt`
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å KandinskyService
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤

### 5. –¢–µ—Å—Ç—ã
- **–§–∞–π–ª**: `app/src/test/java/com/example/ai_advent_25/MCPClientTest.kt`
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
  - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ MCP –∫–ª–∏–µ–Ω—Ç–∞
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤

## ‚úÖ –ß—Ç–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ

### 1. –†–µ–∞–ª—å–Ω–∞—è MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**: –ü–æ–ª–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MCP —Å–µ—Ä–≤–µ—Ä—É —á–µ—Ä–µ–∑ ProcessBuilder
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

### 2. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MCP —Å–µ—Ä–≤–µ—Ä—É
- **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ stdio transport –∏ ProcessBuilder
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

### 3. JSON-RPC –æ–±—Ä–∞–±–æ—Ç–∫–∞
- **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**: –ü–æ–ª–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ JSON-RPC —Å–æ–æ–±—â–µ–Ω–∏–π MCP –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

## üöß –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å

### 1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º MCP —Å–µ—Ä–≤–µ—Ä–æ–º
- –û–±—Ä–∞–±–æ—Ç–∫–∞ edge cases –∏ –æ—à–∏–±–æ–∫
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 2. –£–ª—É—á—à–µ–Ω–∏–µ UX
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–µ—Ç–∏ –∏ API
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ MCP –æ–ø–µ—Ä–∞—Ü–∏–π
- –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ–∫—É—â–∏–µ —Ç–µ—Å—Ç—ã
- ‚úÖ MCP –∫–ª–∏–µ–Ω—Ç - –±–∞–∑–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- ‚úÖ MCP –∫–ª–∏–µ–Ω—Ç - —Å—Ç–∏–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ MCP –∫–ª–∏–µ–Ω—Ç - –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞

### –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º MCP —Å–µ—Ä–≤–µ—Ä–æ–º
- –¢–µ—Å—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- –¢–µ—Å—Ç—ã fallback –º–µ—Ö–∞–Ω–∏–∑–º–∞

## üì± –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç

### –¢–µ–∫—É—â–∏–π flow
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é –æ—Ç –ê–≥–µ–Ω—Ç–∞ ‚Ññ1
2. –ù–∞–∂–∏–º–∞–µ—Ç "–ü–æ–¥–∫–ª—é—á–∏—Ç—å —ç–∫—Å–ø–µ—Ä—Ç–∞" ‚Üí –ê–≥–µ–Ω—Ç ‚Ññ2
3. –ü–æ—è–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "–í–∞—à –≥–æ—Ä–æ–¥ –≥–ª–∞–∑–∞–º–∏ –ò–ò"
4. –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–∑–∞–≥–ª—É—à–∫–∞)

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π flow ‚úÖ
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é –æ—Ç –ê–≥–µ–Ω—Ç–∞ ‚Ññ1
2. –ù–∞–∂–∏–º–∞–µ—Ç "–ü–æ–¥–∫–ª—é—á–∏—Ç—å —ç–∫—Å–ø–µ—Ä—Ç–∞" ‚Üí –ê–≥–µ–Ω—Ç ‚Ññ2
3. –ü–æ—è–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "–í–∞—à –≥–æ—Ä–æ–¥ –≥–ª–∞–∑–∞–º–∏ –ò–ò"
4. –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ MCP Kandinsky
5. MCP –∫–ª–∏–µ–Ω—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç Python —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ uvx
6. JSON-RPC —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ MCP —Å–µ—Ä–≤–µ—Ä
7. MCP —Å–µ—Ä–≤–µ—Ä –≤—ã–∑—ã–≤–∞–µ—Ç Kandinsky API
8. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ø–∞–ø–∫—É kandinsky/
9. –†–µ–∑—É–ª—å—Ç–∞—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–ê–≥–µ–Ω—Ç ‚Ññ3 –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å MCP Kandinsky!** 

‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –ü–æ–ª–Ω–∞—è MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ stdio transport
- JSON-RPC –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ MCP —Å–µ—Ä–≤–µ—Ä–∞ —á–µ—Ä–µ–∑ uvx
- –†–µ–∞–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ Kandinsky API
- Fallback –º–µ—Ö–∞–Ω–∏–∑–º –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ MCP

üöÄ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ç–µ–ø–µ—Ä—å –º–æ–≥—É—Ç:**
- –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≥–æ—Ä–æ–¥–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Kandinsky API
- –ü–æ–ª—É—á–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –≤—ã—Å–æ–∫–æ–º –∫–∞—á–µ—Å—Ç–≤–µ
- –í—ã–±–∏—Ä–∞—Ç—å —Å—Ç–∏–ª–∏ (DEFAULT, KANDINSKY, UHD, ANIME)

**MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [MCP_INTEGRATION_GUIDE.md](MCP_INTEGRATION_GUIDE.md) - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- [README.md](README.md) - –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
- [INTEGRATION_SUMMARY.md](INTEGRATION_SUMMARY.md) - –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
