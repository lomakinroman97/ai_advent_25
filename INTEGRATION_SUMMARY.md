# –†–µ–∑—é–º–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ MCP Kandinsky

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ê–≥–µ–Ω—Ç ‚Ññ3 - GenerateImageAgent
- **–§–∞–π–ª**: `GenerateImageAgentRepository.kt`
- **–§—É–Ω–∫—Ü–∏—è**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≥–æ—Ä–æ–¥–æ–≤ —á–µ—Ä–µ–∑ MCP Kandinsky
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç API –∫–ª—é—á–∏ –∏–∑ mcp.json

### 2. KandinskyService
- **–§–∞–π–ª**: `KandinskyService.kt`
- **–§—É–Ω–∫—Ü–∏—è**: HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Kandinsky API
- **Fallback**: –°–æ–∑–¥–∞–µ—Ç –∑–∞–≥–ª—É—à–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API

### 3. UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **GenerateImageButton**: –ö–Ω–æ–ø–∫–∞ "–í–∞—à –≥–æ—Ä–æ–¥ –≥–ª–∞–∑–∞–º–∏ –ò–ò"
- **GeneratedImageCard**: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- **–ê–Ω–∏–º–∞—Ü–∏–∏**: –ü—É–ª—å—Å–∞—Ü–∏—è –∏ –ø–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã

### 4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- **ChatViewModel**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ê–≥–µ–Ω—Ç–∞ ‚Ññ3
- **ChatUiState**: –§–ª–∞–≥ `imageGenerationRequested`
- **AgentRepositoryFactory**: –°–æ–∑–¥–∞–Ω–∏–µ –ê–≥–µ–Ω—Ç–∞ ‚Ññ3

## üîÑ –ü–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç—ã

1. **–ê–≥–µ–Ω—Ç ‚Ññ1** ‚Üí –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≥–æ—Ä–æ–¥–∞–º
2. **–ö–Ω–æ–ø–∫–∞ "–ü–æ–¥–∫–ª—é—á–∏—Ç—å —ç–∫—Å–ø–µ—Ä—Ç–∞"** ‚Üí –ê–≥–µ–Ω—Ç ‚Ññ2
3. **–ö–Ω–æ–ø–∫–∞ "–í–∞—à –≥–æ—Ä–æ–¥ –≥–ª–∞–∑–∞–º–∏ –ò–ò"** ‚Üí –ê–≥–µ–Ω—Ç ‚Ññ3
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ + –ø—Ä–æ–º–ø—Ç + –≤—Ä–µ–º—è

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```kotlin
implementation("org.json:json:20231013")
testImplementation("org.mockito:mockito-core:5.3.1")
testImplementation("org.jetbrains.kotlinx:kotlinx-coroutines-test:1.8.0")
```

### API –ö–ª—é—á–∏
- **API Key**: `17FB62223849181819EE07BA32335675`
- **Secret Key**: `41551FB4D1968CE3FD02AF6BEDBD1888`

### MCP –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```json
"mcp-kandinsky": {
    "command": "/Users/lomakin_r/.local/bin/uvx",
    "args": ["--python", "3.10", "--from", "mcp_kandinsky", "mcp-kandinsky"],
    "env": {
        "KANDINSKY_API_KEY": "17FB62223849181819EE07BA32335675",
        "KANDINSKY_SECRET_KEY": "41551FB4D1968CE3FD02AF6BEDBD1888"
    }
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã
- `GenerateImageAgentTest.kt` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—É—Å—Ç—ã—Ö —Å–ø–∏—Å–∫–æ–≤ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π

### UI —Ç–µ—Å—Ç—ã
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∫–Ω–æ–ø–æ–∫
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–π

## üöÄ –ó–∞–ø—É—Å–∫

1. **–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ MCP Kandinsky –∑–∞–ø—É—â–µ–Ω**:
   ```bash
   ps aux | grep mcp-kandinsky
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Python 3.10+**:
   ```bash
   python3.10 --version
   ```

3. **–°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç**:
   ```bash
   ./gradlew assembleDebug
   ```

## üì± –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç

- **–ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –ö–Ω–æ–ø–∫–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –ª–æ–≥–∏—á–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
- **–í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å**: –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ—Å—Ç—å**: –ü–æ–∫–∞–∑ –ø—Ä–æ–º–ø—Ç–∞ –∏ –≤—Ä–µ–º–µ–Ω–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: Graceful fallback –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–†–µ–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–∞—Å—Ç–æ—è—â–∏–º Kandinsky API
2. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏**: –í—ã–±–æ—Ä —Å—Ç–∏–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
4. **–ì–∞–ª–µ—Ä–µ—è**: –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
5. **–ü–æ–¥–µ–ª–∏—Ç—å—Å—è**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **MCP_KANDINSKY_INTEGRATION.md** - –ü–æ–¥—Ä–æ–±–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **INTEGRATION_SUMMARY.md** - –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
- **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ** - Inline –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## ‚úÖ –°—Ç–∞—Ç—É—Å

**–ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê** üéâ

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω—ã, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. MCP Kandinsky —É—Å–ø–µ—à–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º.
